{% from 'datatable.js' import dt_init %}

{% macro dt_header() -%}
    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.9/js/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/buttons/1.1.2/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/buttons/1.1.2/js/buttons.colVis.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.9/css/jquery.dataTables.css"/>
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/buttons/1.1.2/css/buttons.dataTables.min.css"/>

    <!-- humanize and column formatting -->
    <script src="/static/humanize.js"></script>
    <script src="/static/column_formatter.js"></script>
{%- endmacro %}


{% macro datatable(dt_config) -%}
{# args: title, name, cols, api_url, default_dort_col, paging #}

<h2>{{ dt_config.title }}</h2>

{% if dt_config.default_sort_col %}
    {% set default_sort_col = dt_config.default_sort_col %}
{% else %}
    {% set default_sort_col = [0, 'asc'] %}
{% endif %}

{% if dt_config.paging == False %}
    {% set paging = 'false' %}
{% else %}
    {% set paging = 'true' %}
{% endif %}
<script type="text/javascript" language="JavaScript" class="init">{{ dt_init(dt_config.name, dt_config.cols, dt_config.api_url, default_sort_col, paging)|safe }}</script>

<table id="{{ dt_config.name }}" class="display">
    <thead>
        <tr>
            {% for col in dt_config.cols %}
            <th>{{ col.title }}</th>
            {% endfor %}
        </tr>
    </thead>
</table>
{%- endmacro %}
