{% extends 'reporting_base.html' %}
{% from 'datatable.html' import datatable, dt_header %}

{% block title %}Run report{% endblock %}
{% block head %}
    {{ super() }}
    {{ dt_header() }}
{% endblock %}

{% block content %}

<h1>Report for {{ run_id }}</h1>

{% for table in aggregations %}
<h2>{{ table.title }}</h2>
{{ datatable(table.name, table.cols, table.api_url, 'false') }}

{% endfor %}

<div id="demultiplexing_tabs">
    <h2>Demultiplexing reports</h2>
    <ol>
        {% for table in demultiplexing_tables %}
        <li><a href="#{{ table.name }}_tab"><span>{{ table.title }}</span></a></li>
        {% endfor %}
    </ol>
    {% for dm_table in demultiplexing_tables %}
    <div id="{{ dm_table.name }}_tab">
        {{ datatable(dm_table.name, dm_table.cols, dm_table.api_url) }}
    </div>
    {% endfor %}
</div>


<div id="unexpected_barcode_tabs">
    <h2>Unexpected barcode reports</h2>
    <ol>
        {% for table in unexpected_barcode_tables %}
        <li><a href="#{{ table.name }}_tab"><span>{{ table.title }}</span></a></li>
        {% endfor %}
    </ol>
    {% for ub_table in unexpected_barcode_tables %}
    <div id="{{ ub_table.name }}_tab">
        {{ datatable(ub_table.name, ub_table.cols, ub_table.api_url) }}
    </div>
    {% endfor %}
</div>

<script>
$("#demultiplexing_tabs").tabs();
$("#unexpected_barcode_tabs").tabs();
</script>

{% endblock %}
