{% extends 'base.html' %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css"/>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" charset="utf8" src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
    <script src="{{ url_for('static', filename='charts.js') }}"></script>
    <script type="text/javascript">
        google.charts.load('current', {packages: ['corechart', 'line', 'bar', 'controls', 'table']});
        google.charts.setOnLoadCallback(drawCharts);
        $('#loadingmessage').show();
        function drawCharts() {
            // Get the run data from the REST API
            $.ajax({
                url: '{{ api_url|safe }}',
                dataType: 'json',
                async: true,
                headers: {'Authorization': '{{ ajax_token | safe}}'},
                success: function(json) {
                    $('#loadingmessage').hide();
                    plotCharts(json['data']);
                    $('#dashboard_div').show();
                }
            });
        }
    </script>
{% endblock %}

{% block content %}
<div id="loadingmessage" class="panel panel-default" style="width: 15%; margin: 0 auto;">
    <div class="panel-body" style="text-align: center;">
        <p class="fa fa-refresh fa-spin"></p>
    </div>
</div>

<div id="dashboard_div" style="display: none">
    <input type="radio" id="ShowRunWeeks" name="radio_button1" checked="checked"/>Show Weeks<br/>
    <input type="radio" id="ShowRunMonths" name="radio_button1"/>Show Months<br/>
    <div id="run_yield_by_date"><!-- Yield chart renders here --></div>
    <div id="samples_sequenced"><!-- Sample chart renders here --></div>
    <div id="cumulative_run_yield_by_date"><!-- Cumulative yield chart renders here --></div>
    <div id="control_div"><!-- Control renders here --></div>
    <br>
    <center><div id="table_run_yield_by_date"><!-- Table renders here --></div></center>
</div>
{% endblock %}