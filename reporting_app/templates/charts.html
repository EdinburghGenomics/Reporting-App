{% extends 'reporting_base.html' %}

{% block head %}
    {{ super() }}

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
    <script src="{{ url_for('static', filename='charts.js') }}"></script>
    <script type="text/javascript">

    google.charts.load('current', {packages: ['corechart', 'line', 'bar', 'table']});
    google.charts.setOnLoadCallback(drawCharts);

    function drawCharts() {
        var pipeline_type = "{{ pipeline }}";
        if (pipeline_type == 'runs') {
            var charts = runCharts;
        } else if (pipeline_type == 'samples') {
            var charts = sampleCharts;
        }

        // Get the run data from the REST API
        $.ajax({
          url: '{{ api_url|safe }}',
          dataType: "json",
          async: true,
          headers: {'Authorization': '{{ ajax_token | safe}}'},
          success: function(json) { charts(json['data']); }
        });

    }

    </script>

{% endblock %}

{% block content %}
{% if pipeline == 'runs' %}
    <input type="radio" id="ShowCumulativeRunYieldMonths" name="radio_button" checked="checked">Show Months</input>
    <input type="radio" id="ShowCumulativeRunYieldWeeks" name="radio_button">Show Weeks</input>
    <div id="run_yield_by_date"></div>
    <div id="cumulative_run_yield_by_date"></div>
    <div id="table_run_yield_by_date"></div>
{% else %}
    <input type="radio" id="ShowMonths" name="radio_button" checked="checked">Show Months</input>
    <input type="radio" id="ShowWeeks" name="radio_button">Show Weeks</input>
    <div id="samples_sequenced"></div>
    <div id="table_samples_sequenced"></div>
{% endif %}




{% endblock %}